!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("mapbox-gl"),require("@mapbox/mapbox-gl-geocoder")):"function"==typeof define&&define.amd?define(["mapbox-gl","@mapbox/mapbox-gl-geocoder"],t):"object"==typeof exports?exports.vue2MapboxGl=t(require("mapbox-gl"),require("@mapbox/mapbox-gl-geocoder")):e.vue2MapboxGl=t(e["mapbox-gl"],e["@mapbox/mapbox-gl-geocoder"])}(window,(function(e,t){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(t,o){t.exports=e},function(e,o){e.exports=t},function(e,t,o){"use strict";o.r(t);var n=function(){return(0,this._self._c)("div",[this._t("layers"),this._v(" "),this._t("sources"),this._v(" "),this._t("default")],2)};n._withStripped=!0;var r=o(0),i=o.n(r);const a=["load","zoomstart","zoomend","zoom","style.load"],s={accessToken:{type:String,required:!0},container:{type:[HTMLElement,String]},minZoom:{type:Number},maxZoom:{type:Number},mapStyle:{type:[Object,String]},antialias:{type:Boolean,default:!0},interactive:{type:Boolean,default:!0},preserveDrawingBuffer:{type:Boolean,default:!1},customAttribution:{type:[String,Array]},center:{type:[Object,Array]},zoom:{type:Number},bearing:{type:Number},pitch:{type:Number},useWebGL2:{type:Boolean,default:!1}};var p=function(e,t,o,n,r,i,a,s){var p,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=o,d._compiled=!0),n&&(d.functional=!0),i&&(d._scopeId="data-v-"+i),a?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=p):r&&(p=s?function(){r.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:r),p)if(d.functional){d._injectStyles=p;var l=d.render;d.render=function(e,t){return p.call(t),l(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,p):[p]}return{exports:e,options:d}}({name:"v-mapbox",data:()=>({map:null}),props:s,provide(){return{getMap:()=>this.map}},methods:{addLayers(){this.$children.forEach(e=>{e.deferredMountedTo(this.map)})},refreshLayers(){this.$children.filter(e=>"v-mapbox-layer"===e.$options.name).forEach(e=>{e.deferredMountedTo(this.map)})},resize(){this.map&&this.map.getCanvas()&&this.map.resize()}},mounted(){i.a.accessToken=this.accessToken;let e=function(e,t){let o=Object.entries(e),n={};o.forEach(([e,t])=>{null!=t&&null!==t.default&&void 0!==t.default&&(n[e]=t.default)}),Object.entries(t||{}).forEach(([e,t])=>{null!=t&&(n[e]=t)});let r=n.mapStyle;return r&&(delete n.mapStyle,n.style=r),n}(s,this.$props);e.container=this.$el,this.map=new i.a.Map(e),function(e,t,o){Object.keys(o).forEach((o,n)=>{"mapStyle"===o&&(o="style");let r="set"+((i=o).charAt(0).toUpperCase()+i.slice(1));var i;let a=o;"style"===o&&(a="mapStyle"),e.$watch(a,(n,i)=>{t[r](n),e.$emit(o+":update",n)})})}(this,this.map,e),this.$emit("mb-created",this.map),function(e,t,o){for(var n=0;n<o.length;n++){const r="mb-"+o[n],i=o[n];t.on(i,t=>{e.$emit(r,t)})}}(this,this.map,a),this.$on("mb-load",()=>{this.addLayers()}),this.$on("style:update",()=>{this.$once("mb-style.load",()=>{this.refreshLayers()})});let t=new ResizeObserver(this.resize);t.observe(this.$el),this.resizeObserver=t},destroyed(){this.map&&this.map.remove()}},n,[],!1,null,null,null).exports;var d={name:"v-mapbox-layer",inject:["getMap"],render:()=>null,props:{options:{type:Object,default:()=>({})},before:{type:String,default:void 0},clickable:{type:Boolean,default:!1},opacity:{type:Number,required:!1,validator:e=>e>=0&&e<=1}},methods:{deferredMountedTo(){this.renderLayer()},renderLayer(){this.removeLayer(),this.addLayer()},addLayer(){const e=this.getMap();if(this.before&&e.getLayer(this.before)?e.addLayer(this.options,this.before):e.addLayer(this.options),this.clickable){const t=this.options.id;e.on("click",t,this.clickFn),e.on("mouseenter",t,this.mouseEnterFn),e.on("mouseleave",t,this.mouseLeaveFn)}null!=this.opacity&&this.setOpacity()},removeLayer(){const e=this.getMap();if(e){const t=this.options.id,o=e.getLayer(t);if(o){const n=o.source;e.removeLayer(t),n&&!e.getStyle().layers.some(({source:e})=>e===n)&&e.removeSource(n),this.clickable&&(e.off("click",t,this.clickFn),e.off("mouseenter",t,this.mouseEnterFn),e.off("mouseleave",t,this.mouseLeaveFn))}}},clickFn(e){this.$emit("click",e)},mouseEnterFn(){this.getMap().getCanvas().style.cursor="pointer"},mouseLeaveFn(){this.getMap().getCanvas().style.cursor=""},setOpacity(){const e=this.getMap(),{id:t,type:o}=this.options;e.setPaintProperty(t,o+"-opacity",this.opacity)}},mounted(){const e=this.getMap();e&&e.isStyleLoaded()&&this.renderLayer()},destroyed(){this.removeLayer()},watch:{options:{deep:!0,handler(){this.renderLayer()}},opacity(){this.setOpacity()}}},l={name:"v-mapbox-source",render(){},data:()=>({}),props:{options:{default:()=>({}),type:Object}},mounted(){},methods:{deferredMountedTo(e){let{id:t,...o}=this.options;e.addSource(t,o)}}},c={name:"v-mapbox-geolocate-control",render(){},data:()=>({control:null}),inject:["getMap"],props:{options:{default:()=>({}),type:Object},position:{type:String,required:!1}},beforeDestroy(){let e=this.getMap();this.control&&e.removeControl(this.control)},mounted(){let e=this.getMap();e&&e.loaded()&&this.addToMap(e)},methods:{deferredMountedTo(e){this.addToMap(e)},addToMap(e){let t={accessToken:i.a.accessToken};t=Object.assign(t,this.options);let o=new i.a.GeolocateControl(t);this.position?e.addControl(o,this.position):e.addControl(o),this.control=o}}},u={name:"v-mapbox-navigation-control",render(){},data:()=>({}),props:{options:{default:()=>({}),type:Object},position:{type:String,required:!1}},mounted(){},methods:{deferredMountedTo(e){let t=new i.a.NavigationControl(this.options);this.position?e.addControl(t,this.position):e.addControl(t)}}},m={name:"v-mapbox-scale-control",render(){},data:()=>({}),props:{options:{default:()=>({}),type:Object},position:{type:String,required:!1}},mounted(){},methods:{deferredMountedTo(e){let t=new i.a.ScaleControl(this.options);this.position?e.addControl(t,this.position):e.addControl(t)}}},h=o(1),f=o.n(h),y={name:"v-mapbox-geocoder",render(){},data:()=>({}),props:{options:{default:()=>({}),type:Object},position:{type:String,required:!1}},mounted(){},methods:{deferredMountedTo(e){let t={mapboxgl:e,accessToken:i.a.accessToken};t=Object.assign(t,this.options);let o=new f.a(t);this.position?e.addControl(o,this.position):e.addControl(o)}}};t.default=function(e,t){e.component("v-mapbox",p),e.component("v-mapbox-layer",d),e.component("v-mapbox-source",l),e.component("v-mapbox-navigation-control",u),e.component("v-mapbox-geolocate-control",c),e.component("v-mapbox-scale-control",m),e.component("v-mapbox-geocoder",y)}}])}));
//# sourceMappingURL=vue2mapbox-gl.min.js.map